\documentclass[]{article}
\usepackage[margin = 1.5in]{geometry}
\setlength{\parindent}{0in}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{hyperref}
\usepackage{wasysym}
\usepackage{soul}

\usepackage[T1]{fontenc}
\usepackage{ae,aecompl}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}{Proposition}[section]

\theoremstyle{definition}
\newtheorem{problem}{Problem}[section]
\newtheorem{defn}{Definition}[section]
\newtheorem{ex}{Example}[section]

\newcommand{\union}{\cup}
\newcommand{\intersection}{\cap}

\setlength{\marginparwidth}{1.5in}
\newcommand{\lecture}[1]{\marginpar{{\footnotesize $\leftarrow$ \underline{#1}}}}

\begin{document}

	\title{\bf{MATH 239: Introduction to Combinatorics}}
	\date{Winter 2013, University of Waterloo \\ \center Notes written from Bertrand Guenin's lectures.}
	\author{Chris Thomson}
	\maketitle
	\newpage
	
	\section{Introduction, Permutations, and Combinations} \lecture{January 7, 2013}
		\subsection{Course Structure}
			The grading scheme is \st{50\%} 55\% final, 30\% midterm, \st{10\% quizzes} 5\% participation marks (clicker questions), and 10\% assignments. There are \st{ten quizzes and} ten assignments. \st{The quizzes will not be announced in advance, and each quiz consists of a single clicker question}. Assignments are typically due on Friday mornings at 10 am. in the dropboxes outside of MC 4066. The midterm exam is scheduled for March 7, 2013, from 4:30 pm - 6:20 pm. There is no textbook for the course, but there are course notes available at Media.doc in MC, and they're \emph{highly} recommended.
			\\ \\
			MATH 239 is split into two parts: counting (weeks 1-5) and graph theory (weeks 6-12).
			\\ \\
			See the course syllabus for more information -- it's available on \href{https://learn.uwaterloo.ca/}{Waterloo LEARN}.

		\subsection{Sample Counting Problems}
			\begin{problem}
				How many ways are there to cut a string of length 5 into parts of sizes 1 and 2?
			\end{problem}
		
			Here are a few example cuts:
			\\ \\
			\begin{tabular}{|c|c|c|c|c|}
				\hline
				1 & 2 & 3 & 4 & 5 \\
				\hline
			\end{tabular}
			5 cuts: size 1, size 1, size 1, size 1, size 1.

			\begin{tabular}{|c|c|c|c|c|}
				\hline
				1 & 1 & 2 & 2 & 3 \\
				\hline
			\end{tabular}
			3 cuts: size 2, size 2, size 1.
		
			\begin{tabular}{|c|c|c|c|c|}
				\hline
				1 & 2 & 2 & 3 & 3 \\
				\hline
			\end{tabular}
			3 cuts: size 1, size 2, size 2.
			\\ \\
			This is a finite problem. You could count all of the possibilities manually in this case. However, this problem could be made more complicated to a point where manually counting all possibilities would become quite cumbersome, as is the case in the next problem.
		
			\begin{problem}[Cuts]
				How many ways are there to cut a string of size 372,694 into parts of sizes 3, 17, 24, and 96?
			\end{problem}
		
			\begin{defn}
				A positive integer $n$ has a \textbf{composition} $(m_1, m_2, \ldots, m_k)$, where $m_1, \ldots, m_k$ are positive integers and where $n = m_1 + m_2 + \ldots + m_k$. $m_1, \ldots, m_k$ are the \textbf{parts} of the composition.
			\end{defn}
		
			Problem 1 could be rephrased as looking for the number of compositions of 5 where all parts are 1 or 2.
		
			\begin{problem}
				How many compositions of $n$ exist such that all parts are odd?
			\end{problem}
		
			\begin{problem}[Binary Strings]
				Let $S = a_1, a_2, \ldots, a_n$ where $a_i \in \{0, 1\}$. How many strings $S$ exist?
			\end{problem}
		
			For each $a_i$, there is the choice between $0$ or $1$, and that choice is independent for each character of the string (for each $a_i$). So, there are $2^n$ binary strings of length $n$.
		
			\begin{problem}
				How many binary strings of size $n$ exist that do not include the substring $1100$?
			\end{problem}
		
			For example: $1010\underline{1100}101 \not \in S$.
		
			\begin{problem}
				How many binary strings of size $n$ exist such that there is no odd-length sequences of zeroes? 
			\end{problem}
		
			For example: $1001001\underline{000}11 \not \in S$.
		
			\begin{problem}[Recurrences]
				How many times does a recursive function get called for a particular input $n$?
			\end{problem}
		
		\subsection{Sample Graph Theory Problems}
			\begin{problem}
				For any arbitrary map of regions, color the regions such that no two touching boundaries do not have the same color, with the least number of colors possible.
			\end{problem}
		
			The \textbf{four-color theorem} (proven later in the course) states that you can always do this with four colors. It's also always possible to color these regions with five colors. It's \emph{sometimes} possible to color the regions with three or fewer colors, depending on the layout of the regions and their boundaries.
		
		\subsection{Permutations and Combinations}
			\subsubsection{Set Notation}
				The usual set and sequence notation is used in this course. $(1, 2, 3)$ is a sequence (where order matters), and $\{1, 2, 3\}$ is a set (where order does not matter).
				\\ \\
				We will also be using one piece of notation you may not be familiar with: $[n] := \{1, 2, \ldots, n\}$.

			\subsubsection{Permutations}
				\begin{defn}
					A \textbf{permutation} of $[n]$ is a rearrangement of the elements of $[n]$. The number of permutations of a set of $n$ objects is $n \times (n - 1) \times \ldots \times 1 = n!$. 
				\end{defn}
			
				For example: the number of permutations of $6$ objects is $6 \times 5 \times 4 \times 3 \times 2 \times 1 = 6!$ permutations.
				\\ \\
				Why is this the case? Simple: there are $n$ choices for the first position, $(n - 1)$ choices for the second position, $(n - 2)$ choices for the third position, and so on, until there's $1$ choice for the $n$th position.

				\begin{defn}
					A \textbf{$k$-subset} is a subset of size $k$.
				\end{defn}

				\begin{problem}
					How many $k$-subsets of $[n]$ exist?
				\end{problem}

				Let's consider a more specific case: how many 4-subsets of 6 are there? $\frac{6 \times 5 \times 4 \times 3}{4!}$.
				\\ \\
				For simplicity's sake, we will introduce notation for this, which we will refer to as a \textbf{combination}, denoted as 
					${n \choose k} = \frac{n!}{k!(n-k)!}$ where $n, k \in \mathbb{Z} \ge 0$.
				
				\begin{proposition}
					There are ${n \choose k}$ $k$-subsets of $[n]$.
				\end{proposition}
				
				\subsubsection{Application: Binomial Theorem} \lecture{January 9, 2013}
					\begin{align*}
						(1 + x)^n = \sum_{k = 0}^{n} {n \choose k} x^k
					\end{align*}
					
					Why is this true?
					
					\begin{align*}
						(1 + x)^3 = \overbrace{(1 + x)}^1\overbrace{(1 + x)}^2\overbrace{(1 + x)}^3 = 1 + 3x + 3x^2 + x^3 = {3 \choose 0} + {3 \choose 1}x + {3 \choose 2}x^2 + {3 \choose 3}x^3
					\end{align*}
					
					\begin{proof}
						\begin{align*}
							(1 + x)^n = \overbrace{(1 + x)}^1 \overbrace{(1 + x)}^2 \cdots \overbrace{(1 + x)}^n
						\end{align*}
						
						In order to get $x^k$, we need to choose $x$ in $k$ of $\{1, \ldots, n \}$. There are ${n \choose k}$ ways of doing this.
					\end{proof}
		
		\section{Simple Tools for Counting}
			\subsection{Partitioning}
				Sets $S_1, S_2$ partition the set $S$ if $S = S_1 \union S_2$ and $S_1 \intersection S_2 = \emptyset$.
				
				\begin{ex}
					\begin{align*}
						S &= [5] = \begin{cases} 
							S_1 = \{1, 2 \} \\
							S_2 = \{3, 4, 5\}
						\end{cases} \\
						|S| &= |S_1| + |S_2|
					\end{align*}
				\end{ex}
				
				\begin{proposition}
					$\displaystyle 2^n = \sum_{k = 0}^{n} {n \choose k}$
				\end{proposition}
				
				\begin{proof}
					We will discuss two proof methods.
					
					\begin{enumerate}
						\item \textbf{Algebraic proof}. Set $x = 1$ in the Binomial Theorem.
						\item \textbf{Combinatorial proof}. We will count the left-hand side and the right-hand side in different ways to reach the same result.
						
						Let $S$ be the set of subsets of $[n]$. $|S| = 2^n$, since for every element of $[n]$ we have two possibilities: include or don't include the element in $S$.
						
						\underline{Aside}: suppose $n = 2$. Then $S = \{\emptyset, \{1\}, \{2\}, \{1, 2\}\}$. 
						
						Partition $S$ into $S_0, S_1, \ldots, S_n$, where $S_k$ is the set of $k$-subsets of $[n]$.
						
						\begin{align*}
							\underbrace{|S|}_{2^n} = \underbrace{|S_0|}_{{n \choose 0}} + \underbrace{|S_1|}_{n \choose 1} + \cdots + \underbrace{|S_n|}_{n \choose n}
						\end{align*}
					\end{enumerate}
				\end{proof}
				
				\begin{proposition}
					$\displaystyle {n \choose k} = {n - 1 \choose k} + {n - 1 \choose k - 1}$
				\end{proposition}
				
				\begin{proof}
					Let $S$ be the set of $k$-subsets of $[n]$. Then $|S| = {n \choose k}$. Partitioning $S$, let $S_1$ be the subsets of $S$ containing $n$, and let $S_2$ be the subsets of $S$ not containing $n$.
					\\ \\
					It's easy to see that $|S_1| = {n - 1 \choose k - 1}$ ($n$ is already included in our choices) and $|S_2| = {n - 1 \choose k}$. We now have $|S| = |S_1| + |S_2| = {n - 1 \choose k - 1} + {n - 1 \choose k}$.
				\end{proof}
				
			\subsection{Pascal's Triangle}
				Pascal's Triangle is a triangle where each value is determined by the sum of its two direct parents. The uppermost value is 1.
				\\ \\
				\begin{center}
					\begin{tabular}{rccccccccc}
						$n = 0$:&    &    &    &    &  1\\\noalign{\smallskip\smallskip}
						$n = 1$:&    &    &    &  1 &    &  1\\\noalign{\smallskip\smallskip}
						$n = 2$:&    &    &  1 &    &  2 &    &  1\\\noalign{\smallskip\smallskip}
						$n = 3$:&    &  1 &    &  3 &    &  3 &    &  1\\\noalign{\smallskip\smallskip}
						$n = 4$:&  1 &    &  4 &    &  6 &    &  4 &    &  1\\\noalign{\smallskip\smallskip}
					\end{tabular}
				\end{center}
				
				\begin{proposition}
					$\displaystyle {q + r \choose q} = \sum_{i = 0}^{r} {q + i - 1 \choose q - 1}$
				\end{proposition}
				
				For example: let $q = 3, r = 2$. Then we have: $\displaystyle {5 \choose 3} = {2 \choose 2} + {3 \choose 2} + {4 \choose 2}$.
				
				\begin{proof}
					Let $S$ be the set of $q$-subsets of $[q + r]$, so $|S| = {q + r \choose q}$. Partition $S$ such that $S_i$ is the set of $q$-subsets where the largest element is $q + i$ (where $i = 0, \ldots, r$).
					\\ \\
					We have: $|S| = |S_0| + |S_1| + \cdots + |S_r|$. Note that $|S_i| = {q + i - 1 \choose q - 1}$. That gives us:
					
					\begin{align*}
						\underbrace{|S|}_{{q + r \choose q}} = \underbrace{\sum_{i = 0}^{r} |S_i|}_{{q + i - 1 \choose q - 1}}
					\end{align*}
				\end{proof}
		
		\subsection{Injections, Bijections, and Onto} \lecture{January 11, 2013}
			Let's consider a function $f: S \to T$.
			\\ \\
			The function $f$ is an \textbf{injection} if for all $x_1, x_2 \in S, x_1 \ne x_2$ such that $f(x_1) \ne f(x_2)$. That is, no element in the codomain $T$ is the image of more than one element in $S$.
			\\ \\
			The function $f$ is \textbf{onto} (or a \textbf{surjection}) if for all $y \in T$, there exists $x \in S$ such that $f(x) = y$. That is, all elements in the codomain $T$ are the image of an element in $S$. Multiple elements in $S$ can map to the same element in $T$.
			\\ \\
			The function $f$ is a \textbf{bijection} if it is both injective and onto. That is, there is a one-to-one mapping between elements in $S$ and $T$, and vice versa.
			
			\begin{proposition}
				If $S$ and $T$ are finite, $|S| = |T|$ if $f$ is bijective.
			\end{proposition}
			
			\begin{defn}
				$g$ is the inverse of $f$ if:
				\begin{enumerate}
					\item For all $x \in S, g(f(x)) = x$.
					\item For all $y \in T, f(g(y)) = y$.
				\end{enumerate}
			\end{defn}
			
			In order to show that a function has a bijection, find the inverse function.
			
			\subsection{Application: Binomial Coefficients}
				\begin{proposition}
					$\displaystyle {n \choose k} = {n \choose n - k}$
				\end{proposition}
				
				\begin{proof}
					I will prove this proposition in a combinatorial using the bijection technique. We want to show that the cardinalities are the same. 
					\\ \\
					Let $S_1$ be the set of $k$-subsets of $[n]$, so $|S_1| = {n \choose k}$, as shown earlier. Let $S_2$ be the set of $(n-k)$-subsets of $[n]$, so $|S_2| = {n \choose n - k}$. We need to show that $|S_1| = |S_2|$, so we need to show that there is a bijection between $S_1$ and $S_2$, $f: S_1 \to S_2$.
					\\ \\
					\underline{Aside}: suppose $n = 5$ and $k = 2$. Then, the bijection could be $\{1, 3\} \to \{2, 4, 5\}$ (the complement function).
					\\ \\
					The bijective function is $f(A) = [n]\backslash A$ (the complement function). Check: $f$ is its own inverse (let $g = f$).
				\end{proof}
				
	\section{Power Series and Generating Functions}
		\subsection{Power Series}
			\begin{defn}
					Let $(a_0, a_1, \ldots)$ be a sequence of rational numbers. Then:
					\begin{align*}
						A(x) = \sum_{i \ge 0} a_i x^i
					\end{align*}
					
					This is called a \textbf{power series}.
			\end{defn}
			
			\begin{ex}
				$a_i = 2^i \implies A(x) = 1 + 2x + 4x^2 + 8x^3 + \cdots$
			\end{ex}

			If the sequence is finite, it is just a polynomial.
			
			\subsubsection{A General Counting Problem}
				Let $S$ be the the set of objects $\sigma$. Each object $\sigma$ has a weight $w(\sigma)$. We want to know how many objects of $S$ have some weight $k$.
				
				\begin{ex}
					Let $\sigma \subseteq [n], w(\sigma) = |\sigma|$. The question becomes: how many $k$-subsets of $[n]$?
				\end{ex}
				
				\begin{ex}
					Let $\sigma$ be the set of coins (1\cent, 5\cent, 10\cent, 25\cent, \$1, \$2), and let $w(\sigma)$ be the total value of the coins in $\sigma$.
					\\ \\
					The question becomes: how many sets of coins have total value $k$? In other words, how many ways are there to give change on $k$ amount?
				\end{ex}
		\subsection{Generating Functions}
			\begin{defn}
				Given $S$ as the set of objects $\sigma$ and a weight function $w(\sigma)$:
				\begin{align*}
					\phi_S(x) = \sum_{\sigma \in S} x^{w(\sigma)}
				\end{align*}
				
				This is called the \textbf{generating function for S, w}.
			\end{defn}
			
			\begin{ex}
				Let $S = \{ \sigma | \sigma \subseteq \{1, 2, 3\} \}, w(\sigma) = |\sigma|$.
				
				\begin{center}
					\begin{tabular}{c|c|c}
						$\sigma$ & $w(\sigma)$ & $x^{w(\sigma)}$ \\ \hline
						$\emptyset$ & 0 & 1 \\
						\{1\} & 1 & x \\
						\{2\} & 1 & x \\
						\{3\} & 1 & x \\
						\{1, 2\} & 2 & $x^2$ \\
						\{1, 3\} & 2 & $x^2$ \\
						\{2, 3\} & 2 & $x^2$ \\
						\{1, 2, 3\} & 3 & $x^3$ \\
					\end{tabular}
				\end{center}
				
				$\phi_S(x) = 1 + 3x + 3x^2 + x^3 = (1 + x)^3$ is the generating function. Notice the coefficients are the number of objects whose weight is equal to the exponent.
			\end{ex}
			
			\textbf{Remember}: the generating function for $S$ with weights $w$ is $\phi_S(x) = \sum_{k \ge 0} a_k x^k$, where $a_k$ is the number of objects of size $k$ in $S$.

			\begin{ex}
				\lecture{January 14, 2013}
				Let $S$ be the set of subsets of [n], and $w(\sigma) = |\sigma|$.
				\begin{align*}
					\phi_S(x) = \sum_{k \ge 0} {n \choose k} x^k = (1 + x)^n
				\end{align*}
				
				Note that ${n \choose k}$ is included because that's the number of $k$-subsets of $[n]$. $\phi_S(x) = (1 + x)^n$ by the binomial theorem.
			\end{ex}

			\begin{proposition}
				Let $\phi_S(x)$ be the generating function for finite-size $S$ with weight $w$. Then:
				\begin{enumerate}
					\item $\phi_S(1) = |S|$
					\item $\phi_S'(1) = $ sum of the weight of all the objects in $S$.
				\end{enumerate}

				Together, we get:
				\begin{align*}
					\frac{\phi_S'(1)}{\phi_S(1)} = \text{average weight of objects in } S
				\end{align*}
			\end{proposition}

			Considering the previous example again, we know that $|S| = 2^n$ and the average weight is clearly $\frac{n}{2}$. We can verify that with this proposition.
			\begin{align*}
				\phi_S(x) = (1 + x)^n &\implies \phi_S(1) = (1 + 1)^n = 2^n \\
				\phi_S'(x) = n(1 + x)^{n - 1} &\implies \phi_S'(1) = n2^{n - 1} \\
				\text{average weight } &= \frac{\phi_S'(1)}{\phi_S(1)} = \frac{n2^{n - 1}}{2^n} = \frac{n}{2}
			\end{align*}

			We'll now prove the proposition more generally.
			\begin{proof}
				We will prove the two parts of the proposition separately. The average weight clearly follows from those two results.
				\begin{enumerate}
					\item 
						\begin{align*}
							\phi_S(x) = \sum_{\sigma \in S} x^{w(\sigma)}
						\end{align*}
						Choose $x = 1$. Then $\phi_S(1) = \sum_{\sigma \in S} 1 = |S|$.

					\item 
						\begin{align*}
							\phi_S'(x) = \sum_{\sigma \in S} w(\sigma)x^{w(\sigma) - 1}
						\end{align*}
						Choose $x = 1$. Then $\phi_S'(1) = \sum_{\sigma \in S} w(\sigma) \cdot 1 = $ total weight of all objects in $S$.
				\end{enumerate}
			\end{proof}

			In order to work further with generating functions, we'll first need to learn how to manipulate power series generally.
		\subsection{Working With (Formal) Power Series}
			For the following definitions, we will assume the following power series are defined:
			\begin{align*}
				A(x) &= a_0 + a_1x + a_2x^2 + \cdots \\
				B(x) &= b_0 + b_1x + b_2x^2 + \cdots
			\end{align*}

			\begin{defn}
				We define \textbf{addition of power series} as follows.
				\begin{align*}
					A(x) + B(x) := \sum_{n \ge 0} (a_n + b_n)x^n
				\end{align*}

				Note that this definition is consistent with the definition of addition for polynomials.
			\end{defn}

			\begin{defn}
				We define \textbf{multiplication of power series} as follows.
				\begin{align*}
					A(x)B(x) := \sum_{n \ge 0} \sum_{k = 0}^{n} a_k b_{n - k}x^n
				\end{align*}
			\end{defn}

			\begin{ex}
				\begin{align*}
					&(1 + x + x^2 + x^3 + \cdots)(1 - x) \\
					&= 1 \cdot 1 + (1 \cdot -1 + 1 \cdot 1)x + (1 \cdot 1 + 1 \cdot -1)x^2 + \cdots \\
					& = 1
				\end{align*}
			\end{ex}

			\begin{defn}
				$B(x)$ is the \textbf{inverse} of $A(x)$ if $A(x)B(x) = 1$ (alternatively, $B(x)A(x) = 1$).
				\\ \\
				We will use the notation $B(x) = \frac{1}{A(x)}$ to indicate that $B(x)$ is the inverse of $A(x)$, and vice versa. 
			\end{defn}

			\begin{ex}
				The inverse of $(1 + x + x^2 + \cdots)$ is $(1 - x)$, as shown in the previous example.
			\end{ex}

			\textbf{Question}: does every power series have an inverse? No. For example, $(x + x^2)$ does not have an inverse. But suppose for a moment that it does.
			\begin{proof}
				If $(x + x^2)$ has an inverse, there would exist constants $b_i$ such that
				\begin{align*}
					(x + x^2)(b_0 + b_1x + b_2x^2 + b_3x^3 + \cdots) = 1
				\end{align*}
				Clearly, this is impossible. In order to equal 1, $b_0$ must multiply by some constant term, however there is no other constant term. Therefore, our assumption was incorrect, meaning $(x + x^2)$ does not have an inverse.
			\end{proof}

			\textbf{Remark}: if a power series does not have a constant term then it has no inverse, and vice versa.
			\begin{theorem}
				If the constant term of $A(x)$ is non-zero, then $A(x)$ has an inverse, and we can find it.
			\end{theorem}

			\textbf{Notation}: given a power series $A(x)$, we say $[x^k]A(x)$ represents the coefficient of $x^k$.

			\begin{ex}
				Find the inverse of $1 - x + x^2 - x^3 + x^4 - \cdots$.
				\begin{align*}
					\underbrace{(1 - x + x^2 - x^3 + x^4 - \cdots)(b_0 + b_1x + b_2x^2 + \cdots)}_{(\star)} = 1
				\end{align*}
				
				\begin{align*}
					[x^0](\star) = 1 \implies 1 \cdot b_0 = 1 &\implies b_0 = 1 \\
					[x^1](\star) = 0 \implies 1 \cdot b_1 - 1 \cdot b_0 = 0 &\implies b_1 = b_0 = 1 \\
					[x^2](\star) = 0 \implies 1 \cdot b_2 - 1 \cdot b_1 + 1 \cdot b_0 = 0 &\implies b_2 = b_1 - b_0 = 0
				\end{align*}
				Similarly, $b_3 = b_4 = \cdots = 0$. Thus, the inverse is $(1 + x)$.
			\end{ex}

			It's clear that the inverse for a power series is \textbf{unique}. We made no choices when determining the inverse, therefore it must be unique.
			\subsubsection{Finding Inverses} \lecture{January 16, 2013}
				Given:
				\begin{align*}
					A(x) = \sum_{n \ge 0} a_nx^n \text{ where } (a_0 \ne 0)
				\end{align*}
				We want to find:
				\begin{align*}
					B(x) = \sum_{n \ge 0} b_nx^n
				\end{align*}
				We'll start by finding $b_0$:
				\begin{align*}
					[x^0]A(x)B(x) = a_0b_0 = 1 \implies b_0 = \frac{1}{a_0}
				\end{align*}
				Notice that if we didn't have the restriction on $a_0$, we would've run into trouble here. Now, suppose you found $b_0, b_1, \ldots, b_{n - 1}$ for $n \ge 1$. Find $b_n$.
				\begin{align*}
					b_n = \frac{1}{a_0} \cdot (-a_1b_{n - 1} - a_2b_{n - 2} - \ldots - a_nb_0)
				\end{align*}

				\begin{proposition}
					Let $A(x)$ and $P(x)$ be formal power series.
					Suppose the constant for $A(x)$ is not 0. Then there exists a unique $B(x)$ such that $A(x)B(x) = P(x)$.
				\end{proposition}
				\textbf{Some useful formul\ae}:
					\begin{align*}
						\frac{1}{1 - x} = 1 + x + x^2 + x_3 + \cdots &\text{ since } 1 = (1 + x + x^2 + \cdots)(1 - x) \\
						\frac{1 - x^{k+1}}{1-x} = 1 + x + x^2 + \cdots + x^k &\text{ since } 1 - x^{k+1} = (1 + x + x^2 + \cdots + x^k)(1-x) 
					\end{align*}
			\subsubsection{Compositions}
				\begin{defn}
					Let $A(x)$ and $B(x)$ be formal power series defined by:
					\begin{align*}
						A(x) = \sum_{n \ge 0} a_n x^n \hspace{1cm} B(x) = \sum_{n \ge 0} b_n x^n
					\end{align*}
					We define the \textbf{composition} as:
					\begin{align*}
						A(B(x)) := \sum_{n \ge 0} a_n [B(x)]^n
					\end{align*}
				\end{defn}

				\begin{ex}
					Let $A(x) = 1 + x + x^2 + x^3 + \cdots$ and $B(x) = 2x$. Then the composition is $A(B(x)) = 1 + 2x + 4x^2 + 8x^3 + \cdots$.
				\end{ex}

				\textbf{Question}: is the composition of two formal power series a formal power series itself? No.
				\begin{ex}
					Suppose we pick $A(x) = 1 + x + x^2 + x^3 + \cdots$ and $B(x) = 1 + x$.
					\\ \\
					We have $A(B(x)) = 1 + (1 + x) + (1 + x)^2 + (1 + x)^3 + \cdots$. This cannot be a formal power series because a formal power series requires that all coefficients ($a_k$) need to be rational numbers, and in this case $a_0$ is infinite.
				\end{ex}

				\begin{ex}
					Suppose we pick $A(x) = 1 + x + x^2 + x^3 + \cdots$ and $B(x) = x + x^2$.
					\\ \\
					We have $A(B(x)) = 1 + (x + x^2)^1 + (x + x^2)^2 + \cdots$. In order to show that this is a formal power series, we need to show that the coefficient of $x^k$ (which is $a_k$) is finite for all $k$.
				\end{ex}
				
				\begin{theorem}
					Let $A(x)$ and $B(x)$ be formal power series, and $[x^0]B(x) = 0$ ($B(x)$'s constant is zero). Then $A(B(x))$ is a formal power series.
				\end{theorem}

				\underline{Aside}:
				\begin{align*}
					a(b(x)) = 1 + (\underbrace{x + x^2}_{x(1+x)})^1 + (\underbrace{x + x^2}_{x(1+x)})^2 + (\underbrace{x + x^2}_{x(1+x)})^3 + \cdots
				\end{align*}

				\begin{proof}
					We need to show that for any fixed $k$, $[x^k]A(B(x))$ is finite.
					\\ \\
					Let $R(x)$ be such that $B(x) = xR(x)$. Then we have:
					\begin{align*}
						[x^k]A(B(x)) &= [x^k] \sum_{n \ge 0} a_n[B(x)]^n \\
						&= [x^k] \sum_{n \ge 0} a_n x^n R(x) \\
						&= [x^k] \sum_{n \ge 0}^{k} a_n x^n (R(x))^n
					\end{align*}

					We made the last sum finite because we're interested in the coefficient of $x^k$ only. Note that this last line shows we can determine the coefficient in a finite number of steps, since $k$ is finite.
				\end{proof}

				\begin{ex}
					Let $y \mapsto x^2$ (I will call $x^2$, $y$).
					\begin{align*}
						\frac{1}{1 - x^2} = \frac{1}{1 - y} &= 1 + y + y^2 + y^3 + \cdots \\
					&= 1 + x^2 + x^4 + x^6 + \cdots
					\end{align*}

					We used composition with $A(x) = 1 + y + y^2 + \cdots$ and $B(x) = x^2$ (constant is zero). We were only allowed to do this because $[x^0]B(x) = 0$.
				\end{ex}
			\subsubsection{Cartesian Product}
				\begin{defn}
					Let $A$ and $B$ be sets. The \textbf{cartesian product} is defined as:
					\begin{align*}
						A \times B := \{ (a, b) \big| a \in A, b \in B \}
					\end{align*}

					Note that $(a, b)$ is an ordered pair.
				\end{defn}

				\begin{ex}
					Let $A = \{1, 2, 3\}$ and $B = \{x, y\}$. Then $A \times B = \{ (1, x), (2, x), (3, x), (1, y), (2, y), (3, y) \}$.
				\end{ex}

				The cardinality of $A \times B$ is the product of the cardinalities of $A$ and $B$: $|A \times B| = |A||B|$.
		\subsection{The Sum and Product Lemmas}
			Let's consider a bin of two red marbles -- one large marble (denoted $R$), and one small marble (denoted $r$). We define $A$ to be the set of all selections of $\ge 1$ marbles. We know: 
			\begin{align*}
				A &= \{ \{r\}, \{R\}, \{r, R\} \} \\
				w(\sigma) &= |\sigma| \\
				\phi_A(x) &= x + x + x^2 = 2x + x^2
			\end{align*}
			Let's now consider a bin of green marbles -- two large marbles (denoted $G$). We define $B$ to be the set of all selections of $\ge 1$ marbles. We know:
			\begin{align*}
				B &= \{ \{G\}, \{G, G\} \} \\
				w(\sigma) &= |\sigma| \\
				\phi_B(x) &= x + x^2
			\end{align*}
			\subsubsection{Sum Lemma}
				Let $S = A \union B = \{ \{r\}, \{R\}, \{r, R\}, \{G\}, \{G, G\} \}$, and note that $A \intersection B = \emptyset$. What is the generating function for $S$?
				\begin{align*}
					\phi_S(x) = \underbrace{(x + x + x^2)}_{\phi_A(x)} + \underbrace{(x  + x^2)}_{\phi_B(x)}
				\end{align*}
				This works in general.
				
				\begin{theorem}[Sum Lemma]
					We have a set $S$ of objects with weight $w$. Let $A$ and $B$ be partitions of $S$. Then:
					\begin{align*}
						\phi_S(x) = \phi_A(x) + \phi_B(x)
					\end{align*}
				\end{theorem}

				\begin{proof}
					\begin{align*}
						\phi_S(x) = \sum_{\sigma \in S} x^{w(\sigma)} = \underbrace{\sum_{\sigma \in A} x^w(\sigma)}_{\phi_A(x)} + \underbrace{\sum_{\sigma \in B} x^{w(\sigma)}}_{\phi_B(x)}
					\end{align*}
				\end{proof}
			\subsubsection{Product Lemma} \lecture{January 18, 2013}
				Let $S = A \times B = \{ (\{r\}, \{G\}), (\{R\}, \{G\}), (\{r, R\}, \{G\}), (\{r\}, \{G, G\}), (\{R\}, \{G, G\}), (\{r, R\}, \{G, G\}) \}$. $S$ is the number of ways of selecting marbles from both bins of marbles. Let $w(\sigma)$ be the number of marbles selected in total.
				\\ \\
				\textbf{Note}: you can think of a generating series as the sum of all objects' $x^{w(\sigma)}$, or you can think of it as the sum of all $a_k x^k$.
				\begin{align*}
					\phi_S(x) &= x^2 + x^2 + x^3 + x^3 + x^3 + x^4 \\
					&= 2x^2 + 3x^3 + x^4 \\
					&= (x + x + x^2)(x + x^2) \\
					&= \phi_A(x) \cdot \phi_B(x)
				\end{align*}
				This works in general.
				\\ \\
				Each term in $\phi_A(x)$ corresponds to an object in $A$, and each term in $\phi_B(x)$ corresponds to an object in $B$. When you find the product, it automatically does the counting for you, due to exponentiation laws.
				\begin{theorem}[Product Lemma]
					Let $A$ be a set where objects have weight $\alpha$, and let $B$ be a set where objects have weight $\beta$. Let $S = A \times B$ be a set of all objects $(a, b) \in S$, where $w[(a, b)] = \alpha(a) + \beta(b)$. Then:
					\begin{align*}
						\phi_S(x) = \phi_A(x) \cdot \phi_B(x)
					\end{align*}
				\end{theorem}

				\begin{proof}
					\begin{align*}
						\phi_S(x) &= \sum{(a, b) \in S} x^{w[(a, b)]} \\
						&= \sum_{(a, b) \in S} x^{\alpha(a) + \beta(b)} \\
						&= \underbrace{\bigg[ \sum_{a \in A} x^{\alpha(a)} \bigg]}_{\phi_A(x)} \cdot \underbrace{\bigg[ \sum_{b \in B} x^{\beta(b)} \bigg]}_{\phi_B(x)}
					\end{align*}
				\end{proof}

				\begin{ex}
					Given integers $n \ge 0$ and $k \ge 0$, how many $k$-tuples $(m_1, m_2, \ldots, m_k)$ (where $m_i \ge 0, m_i \in \mathbb{Z}$) exist where $m_1 + m_2 + \ldots + m_k = n$?
					\\ \\
					Suppose $n = 3$ and $k = 2$. You'll have $(0, 3), (1, 2), (2, 1)$, and $(3, 0)$ \textendash{} four possibilities (notice order matters).
					\\ \\
					We have $\mathbb{N}_0 = \{0, 1, 2, 3, \ldots \}, w(a) = a$. Then:
					\begin{align*}
						\phi_{\mathbb{N}_0}(x) = \sum_{n \ge 0} a_n x^n = 1 + x + x^2 + x^3 + \ldots = \frac{1}{1-x}
					\end{align*}

					Now, let $S = \overbrace{\mathbb{N}_0 \times \mathbb{N}_0 \times \ldots \times \mathbb{N}_0}^{\mathbb{N}_0 \text{ appears } k \text{ times}}$. The objects in $S$ are sequences of form $(m_1, m_2, \ldots, m_k)$, where $m_i \ge 0, m_i \in \mathbb{Z}$. We define $w[(m_1, m_2, \ldots, m_k)] = m_1 + m_2 + \ldots + m_k$.
					\begin{align*}
						\phi_S(x) = [\phi_{\mathbb{N}_0}(x)]^k = \frac{1}{(1-x)^k} \text{ by the product lemma}
					\end{align*}

					Therefore, the number of $k$-tuples $(m_1, m_2, \ldots, m_k$ (where $m_i \ge 0, m_i \in \mathbb{Z}$) where $m_1 + m_2 + \ldots + m_k = n$ is given by $[x^n]\frac{1}{(1 - x)^k}$. But we cannot figure out the coefficient. Let's leave generating functions for now, and find a combinatorial proof for this.
				\end{ex}

				When you use the product lemma, you need to ensure:
				\begin{enumerate}
					\item Ensure it's used on something found by taking the cartesian product.
					\item The weight is equal to the sum of the weights.
				\end{enumerate}
				
				\begin{ex}
					Let $n = 5$ and $k = 3$. We have:

					\begin{center}
						(1, 2, 2): \textbullet{} | \textbullet{} \textbullet{} | \textbullet{} \textbullet{} \\
						(2, 3, 0): \textbullet{} \textbullet{} | \textbullet{} \textbullet{} \textbullet{} |
					\end{center}

					We have $n$ dots and $k-1$ intervals, which gives us:
					\begin{align*}
						{n + (k - 1) \choose k - 1} = {7 \choose 2} \text{ (in this case) }
					\end{align*}

					We always want two bars because $k = 3$. In general, we always want $k - 1$ bars. We want $n$ dots. The combination above is formed by the need to place $k - 1$ bars among all of the positions.
				\end{ex}
				By combining the previous two examples, we have proven the following theorem.
				\begin{theorem}
					\begin{align*}
						[x^n] \frac{1}{(1 - x)^k} = {n + k - 1 \choose k - 1}
					\end{align*}
				\end{theorem}

				\begin{defn}
					Some integer $n$ has \textbf{composition} $(m_1, m_2, \ldots, m_k)$ if $m_1 + m_2 + \ldots + m_k = n$, where $m_i \ge 1, m_i \in \mathbb{Z}$. Note that the only difference from earlier is that $m_i \ge 1$ instead of $m_i \ge 0$.
				\end{defn}
				
				\begin{ex}
					We have $\mathbb{N} = \{1, 2, 3, \ldots \}, w(a) = a$, which gives us:
					\begin{align*}
						\phi_{\mathbb{N}}(x) = x + x^2 + x^3 + \ldots = x(1 + x + x^2 + \ldots) = \frac{x}{1 - x}
					\end{align*}

					Note that $\phi_{\mathbb{N}}(x)$ is missing the object of size zero (the constant term).
					\\ \\
					Let $S = \overbrace{\mathbb{N} \times \mathbb{N} \times \ldots \times \mathbb{N}}^{k \text{ occurrences of } \mathbb{N} \text{ here}}$. We also define the weight as $w[(m_1, m_2, \ldots, m_k)] = m_1 + m_2 + \ldots + m_k$. Then:
					\begin{align*}
						\phi_S(x) = [\phi_{\mathbb{N}}(x)]^k = \frac{x^k}{(1 - x)^k}
					\end{align*}
					\lecture{January 21, 2013}
					We're interested in finding $[x^k]x^k \frac{1}{(1 - x)^k}$.
					\begin{align*}
						[x^n]x^k \frac{1}{(1 - x)^k} &= [x^{n-k}] \frac{1}{(1 - x)^k} \\
						&= {(n - k) + k - 1 \choose k - 1} \\
						&= {n - 1 \choose k - 1}
					\end{align*}
				\end{ex}

				\begin{ex}
					We now want to know the number of compositions of $n$ (where $n \ge 1$) where we have an arbitrary number of parts. We have: $S = \mathbb{N} \union \mathbb{N}^2 \union \mathbb{N}^3 \union \mathbb{N}^4 \union \mathbb{N}^5 \union \ldots$. The weight function is the same as before \textendash{} the sum of the parts. That gives us:
					\begin{align*}
						\phi_S(x) = \sum_{k \ge 1} \phi_{\mathbb{N}^k}(x) = \sum_{k \ge 1} \bigg( \frac{x}{1 - x} \bigg)^k
					\end{align*}

					We want:
					\begin{align*}
						[x^n]\sum_{k \ge 1} \bigg( \frac{x}{1 - x} \bigg)^k
					\end{align*}
					Which is a composition of:
					\begin{align*}
						A(y) &= y + y^2 + y^3 + \ldots = y(1 + y + y^2 + \ldots) = \frac{y}{1 - y} \\
						B(y) &= \frac{x}{1 - x}
					\end{align*}
					The composition is $A(B(x))$, but we need to be careful before using compositions. We can easily check that the constant of $B(x)$ is not zero, as required:
					\begin{align*}
						B(x) = \frac{x}{1 - x} = x(1 + x + x^2 + \ldots) \implies [x^0]B(x) = 0
					\end{align*}
					The composition is well-defined. So, we have:
					\begin{align*}
						\sum_{k \ge 1} \bigg( \frac{x}{1 - x} \bigg)^k = \frac{\frac{x}{1 - x}}{1 - \frac{x}{1 - x}} = \frac{x}{1 - 2x}
					\end{align*}
					We still need to figure out the coefficient $[x^n]\frac{x}{1 - 2x}$.
					\begin{align}
						[x^n] \frac{x}{1 - 2x} &= [x^{n - 1}] \frac{1}{1 - 2x} \\
						&= [x^{n - 1}](1 + y + y^2 + \ldots) \\
						&= [x^{n - 1}](1 + (2x) + (2x)^2 + \ldots) \\
						&= 2^{n - 1}
					\end{align}
					(1) is a common, useful trick. We eliminate any instances of $x$ that are simply multiplied by something, by reducing the power of the coefficient we're looking for. (4) is true since every term is in the form $(2x)^k$.
				\end{ex}

				We might be able to avoid generating functions in some cases by using a combinatorial proof. Now, we'll look at an arbitrary, convoluted example where a combinatorial proof would not suffice. This aims to show that generating functions are solid and can apply in many more situations than combinatorial proofs.
				
				\begin{ex}
					We want to find the number of compositions of $n$ with $2k$ parts, where the first $k$ parts are $\le 5$ and the last $k$ parts are $\ge 3$. 
					\\ \\
					A specific instance of this problem is when $n = 22$ and $k = 3$, we have:
					\begin{align*}
						(\underbrace{\dots}_{\le 5}&, \underbrace{\dots}_{\ge 3}) \\ \\
						(\underbrace{1, 3, 5}_{\le 5}&, \underbrace{3, 6, 4}_{\ge 3})
					\end{align*}
					It's useful to think about what you're counting. In this case, you're counting the $k$-tuples, so this is the cartesian product of six sets (the first three being the set of positive integers $\le 5$ and the last three being the set of integers $\ge 3$).
					\begin{align*}
						\mathbb{N}_{\le 5} &= \{1, 2, 3, 4, 5\} \\
						\mathbb{N}_{\ge 3} &= \{3, 4, 5, \ldots\}
						\\ \\
						S &= (\mathbb{N}_{\le 5})^k \times (\mathbb{N}_{\ge 3})^k
					\end{align*}
					The weight is the sum of the six individual numbers, since $\mathbb{N}_{\le 5}$ and $\mathbb{N}_{\ge 3}$'s weights are both defined by $w(a) = a$, which gives us:
					\begin{align*}
						\phi_{\mathbb{N}_{\le 5}}(x) &= x + x^2 + x^3 + x^4 + x^5 \\
						\phi_{\mathbb{N}_{\ge 3}}(x) &= x^3 + x^4 + x^5 + \ldots
					\end{align*}

					We now apply the product lemma.
				\end{ex}

		
	\newpage
	\section{Clicker Questions}
		\lecture{January 21, 2013}
		\begin{itemize}
			\item How many bijections are there from $\{1, \ldots, n\}$ to $\{1, \ldots, n\}$? $n!$, since you can't map two elements in the first set to the same one element in the second set.
			\item Let $S$ be a set of objects with weight function $w$. Suppose that $S = A \union B$. Does $\phi_S(x) = \phi_A(x) + \phi_B(x)$? No, not always. The sum lemma only applies when $A$ and $B$ are partitions of $S$.
			\item Let $S = \{(a, b) | a, b \ge 1 \in \mathbb{Z}\}, w[(a, b)] = a - b$. What is the generating function for $S$? There is no generating function for $S$, since it is not a power series. There are an infinite number of pairings \textendash{} that is, there are an infinite number of objects with the same weight.
			\item Does $x^2 - x^4 + x^6 - x^8 + x^10 - \ldots$ have an inverse? No. There is no constant term that isn't equal to zero, therefore it does not have an inverse.
			\item Is a composition of $A(x) = 1 + x + x^2 + x^3 + \ldots$ and $B(x) = \frac{1}{1 - x}$ a power series? No. $B(x)$ must have a constant term that is not zero in order for a composition to be acceptable.
		\end{itemize}
\end{document}
